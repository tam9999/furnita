<div id="quick-view-product" class="quickview-product" style="display: none">
  <div class="quickview-overlay fancybox-overlay fancybox-overlay-fixed"></div>
  <div class="quick-view-product">
    <div class="block-quickview primary_block details-product">
      <div class="row">
        <div
          class="product-left-column product-images col-xs-12 col-sm-4 col-md-4 col-lg-5 col-xl-6">
          <div class="image-block large-image col_large_default">
            <span class="view_full_size">
              <a class="img-product" title="" href="javascript:;">
                <img
                  src="/img/categories/danhmuc_1.jpg"
                  id="product-featured-image-quickview"
                  class="img-responsive product-featured-image-quickview img-1"
                  alt="quickview" />
              </a>
            </span>
          </div>
          <div class="more-view-wrapper clearfix">
            <div
              class="thumbs_quickview owl_nav_custome1 swiper-container thumbs_list_quickview swiper-container-initialized swiper-container-horizontal swiper-container-pointer-events"
              id="thumbs_list_quickview">
              <ul
                class="product-photo-thumbs quickview-more-views-owlslider not-thuongdq swiper-wrapper"
                id="thumblist_quickview"
                style="transition-duration: 0ms; transform: translate3d(0px, 0px, 0px)"></ul>
              <!-- <div class="swiper-button-prev swiper-button-disabled"></div>
              <div class="swiper-button-next"></div> -->
            </div>
          </div>
        </div>

        <div
          class="product-center-column product-info product-item col-xs-12 col-sm-6 col-md-8 col-lg-7 col-xl-6 details-pro style_product style_border"
          id="product-31264781">
          <div class="head-qv group-status">
            <h3 class="qwp-name title-product">
              <a
                class="text2line"
                href="/bo-tra-1-3-l-hoang-cung-sen-vang"
                title="Bộ trà 1.3 L - Hoàng Cung - Sen Vàng"
                >Bộ trà 1.3 L - Hoàng Cung - Sen Vàng</a
              >
            </h3>
            <div class="vend-qv group-status">
              <div class="left_vend">
                <div class="first_status">
                  Status:
                  <span class="soluong status_name">In stock</span>
                </div>
                <div class="top_sku first_status">
                  Product code:
                  <span class="sku_ status_name"></span>
                </div>
              </div>
            </div>
          </div>
          <div class="quickview-info">
            <span class="prices price-box">
              <span class="price product-price"></span>
              <del class="old-price"></del>
            </span>
          </div>

          <div class="product-description product-summary">
            <div class="rte">Product information is updating</div>
          </div>

          <form
            action="/cart/add"
            method="post"
            enctype="multipart/form-data"
            class="quick_option variants form-ajaxtocart form-product"
            id="product-actions-31264781">
            <span class="price-product-detail d-none" style="opacity: 0">
              <span class=""></span>
            </span>

            <div class="form_product_content">
              <div class="count_btn_style quantity_wanted_p">
                <div class="soluong1 clearfix">
                  <span class="soluong_h">Amount:</span>
                  <div class="sssssscustom input_number_product">
                    <button
                      class="btn_num num_1 button button_qty"
                      onclick="var result = document.getElementById('quantity-detail');var qtyqv = parseInt(result.value, 10);if (!isNaN(qtyqv) && qtyqv > 1) {result.value = qtyqv - 1;}return false;">
                      -
                    </button>
                    <input
                      type="text"
                      id="quantity-detail"
                      name="quantity"
                      value="1"
                      maxlength="2"
                      class="form-control prd_quantity"
                      onkeypress="if ( isNaN(this.value + String.fromCharCode(event.keyCode) )) return false;"
                      onchange="if(this.value == 0)this.value=1;" />
                    <button
                      class="btn_num num_2 button button_qty"
                      onclick="var result = document.getElementById('quantity-detail'); var qtyqv = result.value; if( !isNaN( qtyqv )) result.value++;return false;">
                      +
                    </button>
                  </div>
                </div>
                <div class="button_actions clearfix">
                  <button
                    type="submit"
                    class="btn_cool btn btn_base fix_add_to_cart ajax_addtocart btn_add_cart btn-cart add_to_cart add_to_cart_detail">
                    <span class="btn-content text_1">Add to cart</span>
                  </button>
                </div>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
    <a title="Close" class="quickview-close close-window" href="javascript:;">
      <svg
        aria-hidden="true"
        focusable="false"
        data-prefix="far"
        data-icon="times"
        role="img"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 320 512"
        class="svg-inline--fa fa-times fa-w-10">
        <path
          fill="currentColor"
          d="M207.6 256l107.72-107.72c6.23-6.23 6.23-16.34 0-22.58l-25.03-25.03c-6.23-6.23-16.34-6.23-22.58 0L160 208.4 52.28 100.68c-6.23-6.23-16.34-6.23-22.58 0L4.68 125.7c-6.23 6.23-6.23 16.34 0 22.58L112.4 256 4.68 363.72c-6.23 6.23-6.23 16.34 0 22.58l25.03 25.03c6.23 6.23 16.34 6.23 22.58 0L160 303.6l107.72 107.72c6.23 6.23 16.34 6.23 22.58 0l25.03-25.03c6.23-6.23 6.23-16.34 0-22.58L207.6 256z"
          class=""></path>
      </svg>
    </a>
  </div>
</div>

<script type="text/javascript">
  function changeImageQuickView(img, selector) {
    var src = $(img).attr('src')
    src = src.replace('_compact', '')

    $(selector).attr('src', src)
  }

  function clear() {
    $('.text2line').empty()
    $('.quickview-id').empty()
    $('.quickview-info').empty()
    $('.product-summary').empty()
    $('.product-description').empty()
  }
</script>
<script>
  var thumbsListQuickview = new Swiper('.thumbs_list_quickview', {
    spaceBetween: 5,
    slidesPerView: 20,
    lazy: true,
    watchSlidesVisibility: true,
    watchSlidesProgress: true,
    slideToClickedSlide: true,
    breakpoints: {
      300: {
        slidesPerView: 'auto',
        spaceBetween: 15,
      },
      640: {
        slidesPerView: 3,
        spaceBetween: 15,
      },
      768: {
        slidesPerView: 2,
        spaceBetween: 30,
      },
      1024: {
        slidesPerView: 3,
        spaceBetween: 30,
      },
      1200: {
        slidesPerView: 3,
        spaceBetween: 43,
      },
    },
  })

  $(document).on('click', '#thumblist_quickview li', function () {
    changeImageQuickView($(this).find('img:first-child'), '.product-featured-image-quickview')
    $('#thumblist_quickview li').removeClass('active')
    $(this).addClass('active')
  })
  $(document).on('click', '.quick-view', function (e) {
    if ($(window).width() > 1025) {
      e.preventDefault()
    }
  })

  $(document).on(
    'click',
    '.quickview-close, #quick-view-product .quickview-overlay, .fancybox-overlay',
    function (e) {
      $('#quick-view-product').fadeOut(0)
      clear()
      awe_hidePopup()
    }
  )

  var modal = $('.quickview-product')
  var span = $('.quickview-close')

  $('.quick-view').click(function () {
    const id = $(this).attr('data-id')
    $.ajax({
      url: `/product/quick-view/${id}`,
      type: 'GET',
      dataType: 'json',
      data: {},
    }).done((product) => {
      $(`.img-product img`).attr('src', product.images[0])
      for (let i = 0; i < product.images.length; i++) {
        $('#thumblist_quickview').append(`
          <li
            class="swiper-slide ${
              i === 0 ? 'swiper-slide-active' : i === 1 ? 'swiper-slide-next' : ''
            }"
            style="width: 95.25px; margin-right: 15px">
            <a href="javascript:void(0)">
              <img
                class="img-${i + 1}"
                src="${product.images[i]}"
                style="max-width: 120px; max-height: 120px" />
            </a>
          </li>
        `)
      }
      $('.text2line').text(product.title)
      $('.sku_').append(`${product.id}`)
      $('.product-price').append(`${product.price}`)
      // $('.quickview-info').append(`<p><strong>Material: </strong>${product.material}</p>`)
      // $('.product-summary').append(`<p><strong>Size: </strong>${product.size}</p>`)
      // $('.product-description').append(
      //   `<p><strong>Description: </strong>${product.description}</p>`
      // )
      modal.show()
    })
  })

  span.click(function () {
    clear()
    modal.hide()
  })

  $(window).on('click', function (e) {
    if ($(e.target).is('.modal')) {
      clear()
      modal.hide()
    }
  })
</script>
